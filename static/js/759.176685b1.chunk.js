"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[759],{5727:function(e,t,n){n.r(t),n.d(t,{default:function(){return X}});var r=n(2791),a=n(8627),s=n(4165),i=n(5861),c=n(9439),o=n(1686),l=n.n(o),d="734588c2699055204b9a6d7af7a03dcd",u=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var n,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&appid=").concat(d));case 3:if((n=e.sent).ok){e.next=7;break}return l().Report.failure("Error","City ".concat(t," is not exist"),"Ok"),e.abrupt("return",null);case 7:return e.next=9,n.json();case 9:return r=e.sent,e.abrupt("return",r);case 13:return e.prev=13,e.t0=e.catch(0),l().Notify.failure("Error loading data. Check your internet connection"),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var n,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.openweathermap.org/data/2.5/forecast?q=".concat(t,"&appid=").concat(d));case 3:if((n=e.sent).ok){e.next=7;break}return l().Report.failure("Error","City ".concat(t," is not exist"),"Ok"),e.abrupt("return",null);case 7:return e.next=9,n.json();case 9:return r=e.sent,e.abrupt("return",r);case 13:return e.prev=13,e.t0=e.catch(0),l().Notify.failure("Error loading data. Check your internet connection"),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),h=n(1889),p=n(7621),x=n(9585),f=n(9504),g=n(184);var j=function(e){var t=e.renderData,n=(0,r.useState)(null),a=(0,c.Z)(n,2),o=a[0],l=a[1];return(0,r.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:n=e.sent,l(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h1",{children:"Next hours"}),o?(0,g.jsx)("div",{className:"forecastContainer",children:(0,g.jsx)(h.ZP,{container:!0,spacing:3,justifyContent:"center",children:o.list.slice(0,8).map((function(e){return(0,g.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,g.jsxs)(p.Z,{className:"forecastCard",children:[(0,g.jsx)(x.Z,{title:e.dt_txt}),(0,g.jsxs)(f.Z,{children:[(0,g.jsx)("p",{children:e.weather[0].description}),(0,g.jsx)("img",{className:"forecastIcon",src:"http://openweathermap.org/img/w/".concat(e.weather[0].icon,".png"),alt:"weather icon"}),(0,g.jsxs)("div",{className:"temperature-info",children:[(0,g.jsxs)("div",{className:"temperature-row",children:[(0,g.jsx)("span",{children:"Temp max:"}),(0,g.jsxs)("span",{className:"temperature-value",children:[Math.round(e.main.temp_max-273.15),"\xb0C"]})]}),(0,g.jsxs)("div",{className:"temperature-row",children:[(0,g.jsx)("span",{children:"Temp min:"}),(0,g.jsxs)("span",{className:"temperature-value",children:[Math.round(e.main.temp_min-273.15),"\xb0C"]})]})]})]})]})},e.dt)}))})}):null]})},Z=n(890);var v=function(e){var t,n,a=e.renderData;if((0,r.useEffect)((function(){a&&console.log(a)}),[a]),!a)return null;var s=(null===(t=a.sys)||void 0===t?void 0:t.sunrise)&&new Date(1e3*a.sys.sunrise).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),i=(null===(n=a.sys)||void 0===n?void 0:n.sunset)&&new Date(1e3*a.sys.sunset).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),c=a.dt&&new Date(1e3*a.dt).toLocaleDateString("en-US",{weekday:"long"}),o=a.dt&&new Date(1e3*a.dt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return(0,g.jsxs)("main",{className:"main",children:[(0,g.jsxs)("div",{className:"weatherContainer",children:[(0,g.jsxs)(p.Z,{className:"weatherCard",children:[(0,g.jsx)(x.Z,{title:"City: ".concat(a.name)}),(0,g.jsxs)(f.Z,{children:[(0,g.jsxs)(Z.Z,{className:"cardText",children:["Day of week: ",c]}),(0,g.jsxs)(Z.Z,{className:"cardText",children:["Time: ",o]}),(0,g.jsxs)(Z.Z,{className:"cardText",children:["Temperature: ",Math.round(a.main.temp-273.15),"\u2103"]})]})]}),(0,g.jsxs)(p.Z,{className:"weatherCard",children:[(0,g.jsx)(x.Z,{title:"Sunrise and Sunset"}),(0,g.jsxs)(f.Z,{children:[s&&(0,g.jsxs)(Z.Z,{className:"cardText",children:["Sunrise: ",s]}),i&&(0,g.jsxs)(Z.Z,{className:"cardText",children:["Sunset: ",i]})]})]}),(0,g.jsxs)(p.Z,{className:"weatherCard",children:[(0,g.jsx)(x.Z,{title:"Weather Info"}),(0,g.jsxs)(f.Z,{children:[(0,g.jsxs)("div",{className:"weatherMainInfo",children:[(0,g.jsxs)(Z.Z,{className:"cardText",children:["Weather: ",a.weather[0].main]}),(0,g.jsx)("div",{className:"weatherInfo"})]}),(0,g.jsxs)(Z.Z,{className:"cardText",children:["Humidity: ",a.main.humidity,"%"]}),(0,g.jsxs)(Z.Z,{className:"cardText",children:["Wind speed: ",a.wind.speed," m/s"]})]})]})]}),(0,g.jsx)(j,{renderData:a.name})]})},y=n(9434),w=n(2195);var b=n.p+"static/media/cloud_logo.384d93c726152810e8d06fecff4ce29e.svg",N=n(7313),k=n(6151),C=n(4395),D=n(4663),S=n(6934),T=n(4554),P=(0,S.ZP)(N.Z)({backgroundColor:"white",borderRadius:"4px",width:"300px",marginLeft:"auto",marginRight:"auto"}),E=(0,S.ZP)(k.Z)({height:"100%",padding:"14px"}),W=function(e){var t=(0,y.I0)(),n=e.setRenderData,a=(0,r.useState)("London"),o=(0,c.Z)(a,2),l=o[0],d=o[1],m=function(){var t=(0,i.Z)((0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(l);case 2:r=t.sent,console.log(l),console.log(e),d(""),n(r);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,r.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(l);case 2:t=e.sent,n(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);return(0,g.jsx)(C.Z,{position:"static",children:(0,g.jsxs)(D.Z,{sx:{py:2},children:[(0,g.jsxs)(T.Z,{className:"hide-on-mobile",sx:{display:"flex",alignItems:"center"},children:[(0,g.jsx)(Z.Z,{variant:"h6",component:"div",sx:{flexGrow:0,mr:1},children:"Weather Forecast"}),(0,g.jsx)("img",{src:b,alt:"cloud logo",width:"36",height:"36"})]}),(0,g.jsxs)(T.Z,{sx:{mx:"auto"},children:[(0,g.jsx)(P,{className:"inputStyle",placeholder:"Find city",onChange:function(e){return d(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&m()},value:l,sx:{mx:2}}),(0,g.jsx)(E,{variant:"contained",color:"primary",onClick:m,disabled:0===l.length,children:"Find"})]}),(0,g.jsx)(T.Z,{className:"buttonContainer",children:(0,g.jsx)(E,{className:"logoutButton",variant:"contained",color:"primary",onClick:function(){return t((0,w.ni)())},children:"Log out"})})]})})},I=n(9164);var L=function(){return(0,g.jsx)(T.Z,{sx:{backgroundColor:"primary.main",py:3},children:(0,g.jsx)(I.Z,{maxWidth:"lg",children:(0,g.jsxs)(Z.Z,{variant:"body1",align:"center",color:"text.secondary",children:["\xa9 ",(new Date).getFullYear()," Gismeteo Wheather. All rights reserved."]})})})},F=n(1413),M=n(3044),R=n(4708),_=n(5523),q=n(9174),U=n(533),B=n(5527),H=n(403),z=n(7107),G=n(4507),O=n(1087);function V(e){return(0,g.jsxs)(Z.Z,(0,F.Z)((0,F.Z)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",(0,g.jsx)(U.Z,{color:"inherit",href:"https://mui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]}))}var Y=(0,z.Z)();var A=function(){var e=(0,y.I0)();return(0,g.jsx)(G.Z,{theme:Y,children:(0,g.jsxs)(h.ZP,{container:!0,component:"main",sx:{height:"100vh"},children:[(0,g.jsx)(R.ZP,{}),(0,g.jsx)(h.ZP,{item:!0,xs:!1,sm:4,md:7,sx:{backgroundImage:"url(https://images.unsplash.com/photo-1630260667842-830a17d12ec9?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80)",backgroundRepeat:"no-repeat",backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[50]:e.palette.grey[900]},backgroundSize:"cover",backgroundPosition:"center"}}),(0,g.jsx)(h.ZP,{item:!0,xs:12,sm:8,md:5,component:B.Z,elevation:6,square:!0,children:(0,g.jsxs)(T.Z,{sx:{my:8,mx:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,g.jsx)(M.Z,{sx:{m:1,bgcolor:"secondary.main"},children:(0,g.jsx)(H.Z,{})}),(0,g.jsx)(Z.Z,{component:"h1",variant:"h5",children:"Sign in"}),(0,g.jsxs)(T.Z,{component:"form",noValidate:!0,onSubmit:function(t){t.preventDefault();var n=new FormData(t.currentTarget);e((0,w.Ib)({email:n.get("email"),password:n.get("password")})),t.currentTarget.reset()},sx:{mt:1},children:[(0,g.jsx)(N.Z,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),(0,g.jsx)(N.Z,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),(0,g.jsx)(_.Z,{control:(0,g.jsx)(q.Z,{value:"remember",color:"primary"}),label:"Remember me"}),(0,g.jsx)(k.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),(0,g.jsxs)(h.ZP,{container:!0,children:[(0,g.jsx)(h.ZP,{item:!0,xs:!0,children:(0,g.jsx)(U.Z,{href:"#",variant:"body2",children:"Forgot password?"})}),(0,g.jsx)(h.ZP,{item:!0,children:(0,g.jsx)(O.rU,{to:"/register",style:{textDecoration:"none"},children:(0,g.jsx)(U.Z,{variant:"body2",children:"Don't have an account? Sign Up"})})})]}),(0,g.jsx)(V,{sx:{mt:5}})]})]})})]})})},K=(n(3666),n(8559)),J=n.n(K),Q=function(e){var t=e.cityName,n=(0,r.useState)(null),a=(0,c.Z)(n,2),s=a[0],i=a[1];return console.log(t),(0,r.useEffect)((function(){if(!s){var e=J().map("map").setView([0,0],5);J().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e),i(e)}}),[s]),(0,r.useEffect)((function(){t&&s&&fetch("https://nominatim.openstreetmap.org/search?city=".concat(t,"&format=json&limit=1")).then((function(e){return e.json()})).then((function(e){if(e&&e.length>0){var t=e[0],n=t.lat,r=t.lon;s.setView([n,r],10);var a=J().tileLayer("https://{s}.tile.openweathermap.org/map/temp_new/{z}/{x}/{y}.png?appid=".concat("734588c2699055204b9a6d7af7a03dcd"),{maxZoom:18,attribution:'Weather data &copy; <a href="https://openweathermap.org/">OpenWeatherMap</a>',tileSize:256,opacity:.5});s.eachLayer((function(e){e!==s.getPane().getElementsByClassName("leaflet-tile-pane")[0].firstChild&&s.removeLayer(e)})),a.addTo(s)}})).catch((function(e){console.error("Error fetching city coordinates:",e)}))}),[t,s]),(0,g.jsx)("div",{id:"map",style:{height:"600px",width:"100%",marginBottom:"20px"}})};function X(e){var t=e.renderData,n=e.setRenderData,r=(0,a.a)().isLoggedIn;return(0,g.jsx)("div",{children:r?(0,g.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[(0,g.jsx)(W,{setRenderData:n}),(0,g.jsxs)("div",{style:{flex:"1 1 auto"},children:[(0,g.jsx)(v,{renderData:t}),t&&(0,g.jsx)(Q,{cityName:t.name})]}),(0,g.jsx)(L,{})]}):(0,g.jsx)(A,{})})}}}]);
//# sourceMappingURL=759.176685b1.chunk.js.map